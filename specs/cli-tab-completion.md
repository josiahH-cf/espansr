# Feature: Shell Tab Completion

**Status:** Not started

## Description

Add shell completion scripts for bash and zsh so that `espansr <TAB>` completes subcommand names and flags. The completions are generated by a new `espansr completions` subcommand that prints the appropriate script to stdout, which the user sources in their shell config.

## Acceptance Criteria

- [ ] `espansr completions bash` prints a bash completion script to stdout
- [ ] `espansr completions zsh` prints a zsh completion script to stdout
- [ ] The bash completion script completes subcommand names (`sync`, `status`, `list`, `validate`, `import`, `setup`, `doctor`, `gui`, `completions`)
- [ ] The bash completion script completes top-level flags (`--version`, `--help`)
- [ ] `install.sh` prints a one-line hint about sourcing completions (does not auto-install)
- [ ] The completion scripts are generated from the actual argparse parser, not hardcoded command lists

## Affected Areas

| Area | Files |
|------|-------|
| **Modify** | `espansr/__main__.py` — add `completions` subparser and `cmd_completions` handler |
| **Create** | `espansr/core/completions.py` — bash/zsh completion script generators |
| **Modify** | `install.sh` — add hint line after setup |
| **Create** | `tests/test_completions.py` — verify script output contains expected commands |

## Constraints

- No new dependencies — generates shell script text from argparse introspection
- Must not require `argcomplete` or other third-party packages
- PowerShell completion is out of scope (Windows users use the GUI or manual commands)

## Out of Scope

- Auto-installing completions into `~/.bashrc` or `~/.zshrc` (user's choice)
- Fish shell support
- Flag-level completion for subcommands (e.g., `espansr sync --<TAB>` completing `--dry-run`)
- PowerShell completions

## Dependencies

- Spec: `/specs/cli-doctor.md` — `doctor` subcommand should be registered before generating completions (or regenerate after)

## Notes

Usage pattern for the user:

```bash
# Bash: add to ~/.bashrc
eval "$(espansr completions bash)"

# Zsh: add to ~/.zshrc
eval "$(espansr completions zsh)"
```

The generated script inspects the current word and returns matches from the known command list. Generating from argparse ensures the list stays in sync as commands are added.

Recommended: 2 tasks (completion generators + tests, then install.sh hint). Single session.
